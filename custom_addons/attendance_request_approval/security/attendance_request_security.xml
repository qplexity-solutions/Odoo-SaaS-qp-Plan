<!-- security/attendance_request_security.xml -->
<odoo>
    <record id="group_attendance_request_team_lead" model="res.groups">
        <field name="name">Team Lead</field>
        <field name="category_id" ref="base.module_category_human_resources"/>
    </record>

    <record id="group_attendance_request_time_office" model="res.groups">
        <field name="name">Time Office</field>
        <field name="category_id" ref="base.module_category_human_resources"/>
    </record>

    <!-- Record rule for employees to see only their own requests -->
    <record id="attendance_request_rule_employee" model="ir.rule">
        <field name="name">Attendance Request Employee Rule</field>
        <field name="model_id" ref="attendance_request_approval.model_attendance_request"/>
        <field name="domain_force">[('employee_id.user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <!-- Record rule for team leads to see requests from their dependents -->
    <record id="attendance_request_rule_team_lead" model="ir.rule">
        <field name="name">Attendance Request Team Lead Rule</field>
        <field name="model_id" ref="attendance_request_approval.model_attendance_request"/>
        <field name="domain_force">[('employee_id.parent_id.user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('attendance_request_approval.group_attendance_request_team_lead'))]"/>
    </record>

    <!-- Record rule for time officers to see all requests -->
    <record id="attendance_request_rule_time_office" model="ir.rule">
        <field name="name">Attendance Request Time Office Rule</field>
        <field name="model_id" ref="attendance_request_approval.model_attendance_request"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('attendance_request_approval.group_attendance_request_time_office'))]"/>
    </record>

    <!--  Multi Company  -->
    <record id="attendance_request_rule_see_company" model="ir.rule">
        <field name="name">Attendance Request: See Company</field>
        <field name="model_id" ref="attendance_request_approval.model_attendance_request"/>
        <field name="domain_force">[('company_id', '=', user.company_id.id)]</field>
        <field name="groups" eval="[(6, 0, [ref('base.group_user')])]"/>
    </record>
</odoo>
